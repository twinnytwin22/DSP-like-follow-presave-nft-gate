<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/aes-js/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#aes-js">AES-JS</a>
      </div>

      <div class="heading h2">
        <a href="#features">Features</a>
      </div>

      <div class="heading h2">
        <a href="#migrating-from-2.x-to-3.x">Migrating from 2.x to 3.x</a>
      </div>

      <div class="heading h1">
        <a href="#api">API</a>
      </div>

      <div class="heading h4">
        <a href="#node.js">Node.js</a>
      </div>

      <div class="heading h4">
        <a href="#web-browser">Web Browser</a>
      </div>

      <div class="heading h2">
        <a href="#keys">Keys</a>
      </div>

      <div class="heading h2">
        <a href="#common-modes-of-operation">Common Modes of Operation</a>
      </div>

      <div class="heading h3">
        <a href="#ctr-counter-recommended">CTR - Counter (recommended)</a>
      </div>

      <div class="heading h3">
        <a href="#cbc-cipher-block-chaining-recommended">CBC - Cipher-Block Chaining (recommended)</a>
      </div>

      <div class="heading h3">
        <a href="#cfb-cipher-feedback">CFB - Cipher Feedback</a>
      </div>

      <div class="heading h3">
        <a href="#ofb-output-feedback">OFB - Output Feedback</a>
      </div>

      <div class="heading h3">
        <a href="#ecb-electronic-codebook-not-recommended">ECB - Electronic Codebook (NOT recommended)</a>
      </div>

      <div class="heading h2">
        <a href="#block-cipher">Block Cipher</a>
      </div>

      <div class="heading h1">
        <a href="#notes">Notes</a>
      </div>

      <div class="heading h2">
        <a href="#what-is-a-key">What is a Key</a>
      </div>

      <div class="heading h2">
        <a href="#performance">Performance</a>
      </div>

      <div class="heading h2">
        <a href="#tests">Tests</a>
      </div>

      <div class="heading h2">
        <a href="#faq">FAQ</a>
      </div>

      <div class="heading h4">
        <a href="#how-do-i-get-a-question-i-have-added">How do I get a question I have added?</a>
      </div>

      <div class="heading h2">
        <a href="#donations">Donations</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="aes-js">
  <h1>
    <a href="#aes-js" name="aes-js" class="pilcrow"></a>
AES-JS
  </h1>
</div>
<p><a href="https://badge.fury.io/js/aes-js"><img src="https://badge.fury.io/js/aes-js.svg" alt="npm version"></a></p>
<p>A pure JavaScript implementation of the AES block cipher algorithm and all common modes of operation (CBC, CFB, CTR, ECB and OFB).</p>
<div class="pilwrap" id="features">
  <h2>
    <a href="#features" name="features" class="pilcrow"></a>
Features
  </h2>
</div>
<ul>
<li>Pure JavaScript (with no dependencies)</li>
<li>Supports all key sizes (128-bit, 192-bit and 256-bit)</li>
<li>Supports all common modes of operation (CBC, CFB, CTR, ECB and OFB)</li>
<li>Works in either node.js or web browsers</li>
</ul>
<div class="pilwrap" id="migrating-from-2.x-to-3.x">
  <h2>
    <a href="#migrating-from-2.x-to-3.x" name="migrating-from-2.x-to-3.x" class="pilcrow"></a>
Migrating from 2.x to 3.x
  </h2>
</div>
<p>The utility functions have been renamed in the 3.x branch, since they were causing a great deal of confusion converting between bytes and string.</p>
<p>The examples have also been updated to encode binary data as printable hex strings.</p>
<p><strong>Strings and Bytes</strong></p>
<p>Strings should <strong>NOT</strong> be used as keys. UTF-8 allows variable length, multi-byte characters, so a string that is 16 <em>characters</em> long may not be 16 <em>bytes</em> long.</p>
<p>Also, UTF8 should <strong>NOT</strong> be used to store arbitrary binary data as it is a <em>string</em> encoding format, not a <em>binary</em> encoding format.</p>
<pre><code class="javascript"><span class="hljs-comment">// aesjs.util.convertStringToBytes(aString)</span>
<span class="hljs-comment">// Becomes:</span>
aesjs.utils.utf8.toBytes(aString)


<span class="hljs-comment">// aesjs.util.convertBytesToString(aString)</span>
<span class="hljs-comment">// Becomes:</span>
aesjs.utils.utf8.fromBytes(aString)
</code></pre>
<p><strong>Bytes and Hex strings</strong></p>
<p>Binary data, such as encrypted bytes, can safely be stored and printed as hexidecimal strings.</p>
<pre><code class="javascript"><span class="hljs-comment">// aesjs.util.convertStringToBytes(aString, 'hex')</span>
<span class="hljs-comment">// Becomes:</span>
aesjs.utils.hex.toBytes(aString)


<span class="hljs-comment">// aesjs.util.convertBytesToString(aString, 'hex')</span>
<span class="hljs-comment">// Becomes:</span>
aesjs.utils.hex.fromBytes(aString)
</code></pre>
<p><strong>Typed Arrays</strong></p>
<p>The 3.x and above versions of aes-js use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array">Uint8Array</a> instead of Array, which reduces code size when used with Browserify (it no longer pulls in Buffer) and is also about <strong>twice</strong> the speed.</p>
<p>However, if you need to support browsers older than IE 10, you should continue using version 2.x.</p>
<div class="pilwrap" id="api">
  <h1>
    <a href="#api" name="api" class="pilcrow"></a>
API
  </h1>
</div>
<div class="pilwrap" id="node.js">
  <h4>
    <a href="#node.js" name="node.js" class="pilcrow"></a>
Node.js
  </h4>
</div>
<p>To install <code>aes-js</code> in your node.js project:</p>
<pre><code>npm install aes-js
</code></pre>
<p>And to access it from within node, simply add:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> aesjs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'aes-js'</span>);
</code></pre>
<div class="pilwrap" id="web-browser">
  <h4>
    <a href="#web-browser" name="web-browser" class="pilcrow"></a>
Web Browser
  </h4>
</div>
<p>To use <code>aes-js</code> in a web page, add the following:</p>
<pre><code class="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.rawgit.com/ricmoo/aes-js/e27b99df/index.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<div class="pilwrap" id="keys">
  <h2>
    <a href="#keys" name="keys" class="pilcrow"></a>
Keys
  </h2>
</div>
<p>All keys must be 128 bits (16 bytes), 192 bits (24 bytes) or 256 bits (32 bytes) long.</p>
<p>The library work with <code>Array</code>, <code>Uint8Array</code> and <code>Buffer</code> objects as well as any <em>array-like</em> object (i.e. must have a <code>length</code> property, and have a valid byte value for each entry).</p>
<pre><code class="javascript"><span class="hljs-comment">// 128-bit, 192-bit and 256-bit keys</span>
<span class="hljs-keyword">var</span> key_128 = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>];
<span class="hljs-keyword">var</span> key_192 = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>,
               <span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>];
<span class="hljs-keyword">var</span> key_256 = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>,
               <span class="hljs-number">16</span>, <span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>, <span class="hljs-number">26</span>, <span class="hljs-number">27</span>, <span class="hljs-number">28</span>,
               <span class="hljs-number">29</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>];

<span class="hljs-comment">// or, you may use Uint8Array:</span>
<span class="hljs-keyword">var</span> key_128_array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(key_128);
<span class="hljs-keyword">var</span> key_192_array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(key_192);
<span class="hljs-keyword">var</span> key_258_array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(key_256);

<span class="hljs-comment">// or, you may use Buffer in node.js:</span>
<span class="hljs-keyword">var</span> key_128_buffer = <span class="hljs-keyword">new</span> Buffer(key_128);
<span class="hljs-keyword">var</span> key_192_buffer = <span class="hljs-keyword">new</span> Buffer(key_192);
<span class="hljs-keyword">var</span> key_258_buffer = <span class="hljs-keyword">new</span> Buffer(key_256);
</code></pre>
<p>To generate keys from simple-to-remember passwords, consider using a password-based key-derivation function such as <a href="https://www.npmjs.com/package/scrypt-js">scrypt</a> or <a href="https://www.npmjs.com/search?q=bcrypt">bcrypt</a>.</p>
<div class="pilwrap" id="common-modes-of-operation">
  <h2>
    <a href="#common-modes-of-operation" name="common-modes-of-operation" class="pilcrow"></a>
Common Modes of Operation
  </h2>
</div>
<p>There are several modes of operations, each with various pros and cons. In general though, the <strong>CBC</strong> and <strong>CTR</strong> modes are recommended. The <strong>ECB is NOT recommended.</strong>, and is included primarily for completeness.</p>
<div class="pilwrap" id="ctr-counter-recommended">
  <h3>
    <a href="#ctr-counter-recommended" name="ctr-counter-recommended" class="pilcrow"></a>
CTR - Counter (recommended)
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-comment">// An example 128-bit key (16 bytes * 8 bits/byte = 128 bits)</span>
<span class="hljs-keyword">var</span> key = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>, <span class="hljs-number">16</span> ];

<span class="hljs-comment">// Convert text to bytes</span>
<span class="hljs-keyword">var</span> text = <span class="hljs-string">'Text may be any length you wish, no padding is required.'</span>;
<span class="hljs-keyword">var</span> textBytes = aesjs.utils.utf8.toBytes(text);

<span class="hljs-comment">// The counter is optional, and if omitted will begin at 1</span>
<span class="hljs-keyword">var</span> aesCtr = <span class="hljs-keyword">new</span> aesjs.ModeOfOperation.ctr(key, <span class="hljs-keyword">new</span> aesjs.Counter(<span class="hljs-number">5</span>));
<span class="hljs-keyword">var</span> encryptedBytes = aesCtr.encrypt(textBytes);

<span class="hljs-comment">// To print or store the binary data, you may convert it to hex</span>
<span class="hljs-keyword">var</span> encryptedHex = aesjs.utils.hex.fromBytes(encryptedBytes);
<span class="hljs-built_in">console</span>.log(encryptedHex);
<span class="hljs-comment">// "a338eda3874ed884b6199150d36f49988c90f5c47fe7792b0cf8c7f77eeffd87</span>
<span class="hljs-comment">//  ea145b73e82aefcf2076f881c88879e4e25b1d7b24ba2788"</span>

<span class="hljs-comment">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="hljs-keyword">var</span> encryptedBytes = aesjs.utils.hex.toBytes(encryptedHex);

<span class="hljs-comment">// The counter mode of operation maintains internal state, so to</span>
<span class="hljs-comment">// decrypt a new instance must be instantiated.</span>
<span class="hljs-keyword">var</span> aesCtr = <span class="hljs-keyword">new</span> aesjs.ModeOfOperation.ctr(key, <span class="hljs-keyword">new</span> aesjs.Counter(<span class="hljs-number">5</span>));
<span class="hljs-keyword">var</span> decryptedBytes = aesCtr.decrypt(encryptedBytes);

<span class="hljs-comment">// Convert our bytes back into text</span>
<span class="hljs-keyword">var</span> decryptedText = aesjs.utils.utf8.fromBytes(decryptedBytes);
<span class="hljs-built_in">console</span>.log(decryptedText);
<span class="hljs-comment">// "Text may be any length you wish, no padding is required."</span>
</code></pre>
<div class="pilwrap" id="cbc-cipher-block-chaining-recommended">
  <h3>
    <a href="#cbc-cipher-block-chaining-recommended" name="cbc-cipher-block-chaining-recommended" class="pilcrow"></a>
CBC - Cipher-Block Chaining (recommended)
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-comment">// An example 128-bit key</span>
<span class="hljs-keyword">var</span> key = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>, <span class="hljs-number">16</span> ];

<span class="hljs-comment">// The initialization vector (must be 16 bytes)</span>
<span class="hljs-keyword">var</span> iv = [ <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>, <span class="hljs-number">26</span>, <span class="hljs-number">27</span>, <span class="hljs-number">28</span>, <span class="hljs-number">29</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">32</span>, <span class="hljs-number">33</span>, <span class="hljs-number">34</span>,<span class="hljs-number">35</span>, <span class="hljs-number">36</span> ];

<span class="hljs-comment">// Convert text to bytes (text must be a multiple of 16 bytes)</span>
<span class="hljs-keyword">var</span> text = <span class="hljs-string">'TextMustBe16Byte'</span>;
<span class="hljs-keyword">var</span> textBytes = aesjs.utils.utf8.toBytes(text);

<span class="hljs-keyword">var</span> aesCbc = <span class="hljs-keyword">new</span> aesjs.ModeOfOperation.cbc(key, iv);
<span class="hljs-keyword">var</span> encryptedBytes = aesCbc.encrypt(textBytes);

<span class="hljs-comment">// To print or store the binary data, you may convert it to hex</span>
<span class="hljs-keyword">var</span> encryptedHex = aesjs.utils.hex.fromBytes(encryptedBytes);
<span class="hljs-built_in">console</span>.log(encryptedHex);
<span class="hljs-comment">// "104fb073f9a131f2cab49184bb864ca2"</span>

<span class="hljs-comment">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="hljs-keyword">var</span> encryptedBytes = aesjs.utils.hex.toBytes(encryptedHex);

<span class="hljs-comment">// The cipher-block chaining mode of operation maintains internal</span>
<span class="hljs-comment">// state, so to decrypt a new instance must be instantiated.</span>
<span class="hljs-keyword">var</span> aesCbc = <span class="hljs-keyword">new</span> aesjs.ModeOfOperation.cbc(key, iv);
<span class="hljs-keyword">var</span> decryptedBytes = aesCbc.decrypt(encryptedBytes);

<span class="hljs-comment">// Convert our bytes back into text</span>
<span class="hljs-keyword">var</span> decryptedText = aesjs.utils.utf8.fromBytes(decryptedBytes);
<span class="hljs-built_in">console</span>.log(decryptedText);
<span class="hljs-comment">// "TextMustBe16Byte"</span>
</code></pre>
<div class="pilwrap" id="cfb-cipher-feedback">
  <h3>
    <a href="#cfb-cipher-feedback" name="cfb-cipher-feedback" class="pilcrow"></a>
CFB - Cipher Feedback
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-comment">// An example 128-bit key</span>
<span class="hljs-keyword">var</span> key = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>, <span class="hljs-number">16</span> ];

<span class="hljs-comment">// The initialization vector (must be 16 bytes)</span>
<span class="hljs-keyword">var</span> iv = [ <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>, <span class="hljs-number">26</span>, <span class="hljs-number">27</span>, <span class="hljs-number">28</span>, <span class="hljs-number">29</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">32</span>, <span class="hljs-number">33</span>, <span class="hljs-number">34</span>,<span class="hljs-number">35</span>, <span class="hljs-number">36</span> ];

<span class="hljs-comment">// Convert text to bytes (must be a multiple of the segment size you choose below)</span>
<span class="hljs-keyword">var</span> text = <span class="hljs-string">'TextMustBeAMultipleOfSegmentSize'</span>;
<span class="hljs-keyword">var</span> textBytes = aesjs.utils.utf8.toBytes(text);

<span class="hljs-comment">// The segment size is optional, and defaults to 1</span>
<span class="hljs-keyword">var</span> segmentSize = <span class="hljs-number">8</span>;
<span class="hljs-keyword">var</span> aesCfb = <span class="hljs-keyword">new</span> aesjs.ModeOfOperation.cfb(key, iv, segmentSize);
<span class="hljs-keyword">var</span> encryptedBytes = aesCfb.encrypt(textBytes);

<span class="hljs-comment">// To print or store the binary data, you may convert it to hex</span>
<span class="hljs-keyword">var</span> encryptedHex = aesjs.utils.hex.fromBytes(encryptedBytes);
<span class="hljs-built_in">console</span>.log(encryptedHex);
<span class="hljs-comment">// "55e3af2638c560b4fdb9d26a630733ea60197ec23deb85b1f60f71f10409ce27"</span>

<span class="hljs-comment">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="hljs-keyword">var</span> encryptedBytes = aesjs.utils.hex.toBytes(encryptedHex);

<span class="hljs-comment">// The cipher feedback mode of operation maintains internal state,</span>
<span class="hljs-comment">// so to decrypt a new instance must be instantiated.</span>
<span class="hljs-keyword">var</span> aesCfb = <span class="hljs-keyword">new</span> aesjs.ModeOfOperation.cfb(key, iv, <span class="hljs-number">8</span>);
<span class="hljs-keyword">var</span> decryptedBytes = aesCfb.decrypt(encryptedBytes);

<span class="hljs-comment">// Convert our bytes back into text</span>
<span class="hljs-keyword">var</span> decryptedText = aesjs.utils.utf8.fromBytes(decryptedBytes);
<span class="hljs-built_in">console</span>.log(decryptedText);
<span class="hljs-comment">// "TextMustBeAMultipleOfSegmentSize"</span>
</code></pre>
<div class="pilwrap" id="ofb-output-feedback">
  <h3>
    <a href="#ofb-output-feedback" name="ofb-output-feedback" class="pilcrow"></a>
OFB - Output Feedback
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-comment">// An example 128-bit key</span>
<span class="hljs-keyword">var</span> key = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>, <span class="hljs-number">16</span> ];

<span class="hljs-comment">// The initialization vector (must be 16 bytes)</span>
<span class="hljs-keyword">var</span> iv = [ <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>, <span class="hljs-number">26</span>, <span class="hljs-number">27</span>, <span class="hljs-number">28</span>, <span class="hljs-number">29</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">32</span>, <span class="hljs-number">33</span>, <span class="hljs-number">34</span>,<span class="hljs-number">35</span>, <span class="hljs-number">36</span> ];

<span class="hljs-comment">// Convert text to bytes</span>
<span class="hljs-keyword">var</span> text = <span class="hljs-string">'Text may be any length you wish, no padding is required.'</span>;
<span class="hljs-keyword">var</span> textBytes = aesjs.utils.utf8.toBytes(text);

<span class="hljs-keyword">var</span> aesOfb = <span class="hljs-keyword">new</span> aesjs.ModeOfOperation.ofb(key, iv);
<span class="hljs-keyword">var</span> encryptedBytes = aesOfb.encrypt(textBytes);

<span class="hljs-comment">// To print or store the binary data, you may convert it to hex</span>
<span class="hljs-keyword">var</span> encryptedHex = aesjs.utils.hex.fromBytes(encryptedBytes);
<span class="hljs-built_in">console</span>.log(encryptedHex);
<span class="hljs-comment">// "55e3af2655dd72b9f32456042f39bae9accff6259159e608be55a1aa313c598d</span>
<span class="hljs-comment">//  b4b18406d89c83841c9d1af13b56de8eda8fcfe9ec8e75e8"</span>

<span class="hljs-comment">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="hljs-keyword">var</span> encryptedBytes = aesjs.utils.hex.toBytes(encryptedHex);

<span class="hljs-comment">// The output feedback mode of operation maintains internal state,</span>
<span class="hljs-comment">// so to decrypt a new instance must be instantiated.</span>
<span class="hljs-keyword">var</span> aesOfb = <span class="hljs-keyword">new</span> aesjs.ModeOfOperation.ofb(key, iv);
<span class="hljs-keyword">var</span> decryptedBytes = aesOfb.decrypt(encryptedBytes);

<span class="hljs-comment">// Convert our bytes back into text</span>
<span class="hljs-keyword">var</span> decryptedText = aesjs.utils.utf8.fromBytes(decryptedBytes);
<span class="hljs-built_in">console</span>.log(decryptedText);
<span class="hljs-comment">// "Text may be any length you wish, no padding is required."</span>
</code></pre>
<div class="pilwrap" id="ecb-electronic-codebook-not-recommended">
  <h3>
    <a href="#ecb-electronic-codebook-not-recommended" name="ecb-electronic-codebook-not-recommended" class="pilcrow"></a>
ECB - Electronic Codebook (NOT recommended)
  </h3>
</div>
<p>This mode is <strong>not</strong> recommended. Since, for a given key, the same plaintext block in produces the same ciphertext block out, this mode of operation can leak data, such as patterns. For more details and examples, see the Wikipedia article, <a href="http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Electronic_Codebook_.28ECB.29">Electronic Codebook</a>.</p>
<pre><code class="javascript"><span class="hljs-comment">// An example 128-bit key</span>
<span class="hljs-keyword">var</span> key = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>, <span class="hljs-number">16</span> ];

<span class="hljs-comment">// Convert text to bytes</span>
<span class="hljs-keyword">var</span> text = <span class="hljs-string">'TextMustBe16Byte'</span>;
<span class="hljs-keyword">var</span> textBytes = aesjs.utils.utf8.toBytes(text);

<span class="hljs-keyword">var</span> aesEcb = <span class="hljs-keyword">new</span> aesjs.ModeOfOperation.ecb(key);
<span class="hljs-keyword">var</span> encryptedBytes = aesEcb.encrypt(textBytes);

<span class="hljs-comment">// To print or store the binary data, you may convert it to hex</span>
<span class="hljs-keyword">var</span> encryptedHex = aesjs.utils.hex.fromBytes(encryptedBytes);
<span class="hljs-built_in">console</span>.log(encryptedHex);
<span class="hljs-comment">// "a7d93b35368519fac347498dec18b458"</span>

<span class="hljs-comment">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="hljs-keyword">var</span> encryptedBytes = aesjs.utils.hex.toBytes(encryptedHex);

<span class="hljs-comment">// Since electronic codebook does not store state, we can</span>
<span class="hljs-comment">// reuse the same instance.</span>
<span class="hljs-comment">//var aesEcb = new aesjs.ModeOfOperation.ecb(key);</span>
<span class="hljs-keyword">var</span> decryptedBytes = aesEcb.decrypt(encryptedBytes);

<span class="hljs-comment">// Convert our bytes back into text</span>
<span class="hljs-keyword">var</span> decryptedText = aesjs.utils.utf8.fromBytes(decryptedBytes);
<span class="hljs-built_in">console</span>.log(decryptedText);
<span class="hljs-comment">// "TextMustBe16Byte"</span>
</code></pre>
<div class="pilwrap" id="block-cipher">
  <h2>
    <a href="#block-cipher" name="block-cipher" class="pilcrow"></a>
Block Cipher
  </h2>
</div>
<p>You should usually use one of the above common modes of operation. Using the block cipher algorithm directly is also possible using <strong>ECB</strong> as that mode of operation is merely a thin wrapper.</p>
<p>But this might be useful to experiment with custom modes of operation or play with block cipher algorithms.</p>
<pre><code class="javascript">
<span class="hljs-comment">// the AES block cipher algorithm works on 16 byte bloca ks, no more, no less</span>
<span class="hljs-keyword">var</span> text = <span class="hljs-string">"ABlockIs16Bytes!"</span>;
<span class="hljs-keyword">var</span> textAsBytes = aesjs.utils.utf8.toBytes(text)
<span class="hljs-built_in">console</span>.log(textAsBytes);
<span class="hljs-comment">// [65, 66, 108, 111, 99, 107, 73, 115, 49, 54, 66, 121, 116, 101, 115, 33]</span>

<span class="hljs-comment">// create an instance of the block cipher algorithm</span>
<span class="hljs-keyword">var</span> key = [<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">var</span> aes = <span class="hljs-keyword">new</span> aesjs.AES(key);

<span class="hljs-comment">// encrypt...</span>
<span class="hljs-keyword">var</span> encryptedBytes = aes.encrypt(textAsBytes);
<span class="hljs-built_in">console</span>.log(encryptedBytes);
<span class="hljs-comment">// [136, 15, 199, 174, 118, 133, 233, 177, 143, 47, 42, 211, 96, 55, 107, 109] </span>

<span class="hljs-comment">// To print or store the binary data, you may convert it to hex</span>
<span class="hljs-keyword">var</span> encryptedHex = aesjs.utils.hex.fromBytes(encryptedBytes);
<span class="hljs-built_in">console</span>.log(encryptedHex);
<span class="hljs-comment">// "880fc7ae7685e9b18f2f2ad360376b6d"</span>

<span class="hljs-comment">// When ready to decrypt the hex string, convert it back to bytes</span>
<span class="hljs-keyword">var</span> encryptedBytes = aesjs.utils.hex.toBytes(encryptedHex);

<span class="hljs-comment">// decrypt...</span>
<span class="hljs-keyword">var</span> decryptedBytes = aes.decrypt(encryptedBytes);
<span class="hljs-built_in">console</span>.log(decryptedBytes);
<span class="hljs-comment">// [65, 66, 108, 111, 99, 107, 73, 115, 49, 54, 66, 121, 116, 101, 115, 33]</span>


<span class="hljs-comment">// decode the bytes back into our original text</span>
<span class="hljs-keyword">var</span> decryptedText = aesjs.utils.utf8.fromBytes(decryptedBytes);
<span class="hljs-built_in">console</span>.log(decryptedText);
<span class="hljs-comment">// "ABlockIs16Bytes!"</span>
</code></pre>
<div class="pilwrap" id="notes">
  <h1>
    <a href="#notes" name="notes" class="pilcrow"></a>
Notes
  </h1>
</div>
<div class="pilwrap" id="what-is-a-key">
  <h2>
    <a href="#what-is-a-key" name="what-is-a-key" class="pilcrow"></a>
What is a Key
  </h2>
</div>
<p>This seems to be a point of confusion for many people new to using encryption. You can think of the key as the <em>&quot;password&quot;</em>. However, these algorithms require the <em>&quot;password&quot;</em> to be a specific length.</p>
<p>With AES, there are three possible key lengths, 128-bit (16 bytes), 192-bit (24 bytes) or 256-bit (32 bytes). When you create an AES object, the key size is automatically detected, so it is important to pass in a key of the correct length.</p>
<p>Often, you wish to provide a password of arbitrary length, for example, something easy to remember or write down. In these cases, you must come up with a way to transform the password into a key of a specific length. A <strong>Password-Based Key Derivation Function</strong> (PBKDF) is an algorithm designed for this exact purpose.</p>
<p>Here is an example, using the popular (possibly obsolete?) pbkdf2:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> pbkdf2 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'pbkdf2'</span>);

<span class="hljs-keyword">var</span> key_128 = pbkdf2.pbkdf2Sync(<span class="hljs-string">'password'</span>, <span class="hljs-string">'salt'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">128</span> / <span class="hljs-number">8</span>, <span class="hljs-string">'sha512'</span>);
<span class="hljs-keyword">var</span> key_192 = pbkdf2.pbkdf2Sync(<span class="hljs-string">'password'</span>, <span class="hljs-string">'salt'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">192</span> / <span class="hljs-number">8</span>, <span class="hljs-string">'sha512'</span>);
<span class="hljs-keyword">var</span> key_256 = pbkdf2.pbkdf2Sync(<span class="hljs-string">'password'</span>, <span class="hljs-string">'salt'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">256</span> / <span class="hljs-number">8</span>, <span class="hljs-string">'sha512'</span>);
</code></pre>
<p>Another possibility, is to use a hashing function, such as SHA256 to hash the password, but this method is vulnerable to <a href="http://en.wikipedia.org/wiki/Rainbow_table">Rainbow Attacks</a>, unless you use a <a href="http://en.wikipedia.org/wiki/Salt_(cryptography)">salt</a>.</p>
<div class="pilwrap" id="performance">
  <h2>
    <a href="#performance" name="performance" class="pilcrow"></a>
Performance
  </h2>
</div>
<p>Todo...</p>
<div class="pilwrap" id="tests">
  <h2>
    <a href="#tests" name="tests" class="pilcrow"></a>
Tests
  </h2>
</div>
<p>A test suite has been generated (<code>test/test-vectors.json</code>) from a known correct implementation, <a href="https://www.dlitz.net/software/pycrypto/">pycrypto</a>. To generate new test vectors, run <code>python generate-tests.py</code>.</p>
<p>To run the node.js test suite:</p>
<pre><code>npm test
</code></pre>
<p>To run the web browser tests, open the <code>test/test.html</code> file in your browser.</p>
<div class="pilwrap" id="faq">
  <h2>
    <a href="#faq" name="faq" class="pilcrow"></a>
FAQ
  </h2>
</div>
<div class="pilwrap" id="how-do-i-get-a-question-i-have-added">
  <h4>
    <a href="#how-do-i-get-a-question-i-have-added" name="how-do-i-get-a-question-i-have-added" class="pilcrow"></a>
How do I get a question I have added?
  </h4>
</div>
<p>E-mail me at aes-js@ricmoo.com with any questions, suggestions, comments, et cetera.</p>
<div class="pilwrap" id="donations">
  <h2>
    <a href="#donations" name="donations" class="pilcrow"></a>
Donations
  </h2>
</div>
<p>Obviously, it's all licensed under the MIT license, so use it as you wish; but if you'd like to buy me a coffee, I won't complain. =)</p>
<ul>
<li>Bitcoin - <code>1K1Ax9t6uJmjE4X5xcoVuyVTsiLrYRqe2P</code></li>
<li>Ethereum - <code>0x70bDC274028F3f391E398dF8e3977De64FEcBf04</code></li>
</ul>
</div>
  </div>
</body>
</html>
